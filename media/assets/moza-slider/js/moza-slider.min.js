/*
 *
 * @package		jQuery Moza Slider 1.0
 * @author		Vu Doan Thang 
 * @copyright	Vu Doan Thang
 */

/* jQuery animate pause */
(function(e){var t=jQuery.dequeue;var n=jQuery.Tween.prototype.run;jQuery.extend({dequeue:function(n,r){var i=e(n).data("queue_index");if(i==undefined||i==null){i=-1}i++;e(n).data("queue_index",i);t.call(this,n,r)}});jQuery.Tween.prototype.cur=function(){var t=jQuery.Tween.propHooks[this.prop];var n=e(this.elem).data("queue_cur_"+this.prop+"_"+e(this.elem).data("queue_index"));if(n==undefined||n==null){n=t&&t.get?t.get(this):jQuery.Tween.propHooks._default.get(this);e(this.elem).data("queue_cur_"+this.prop+"_"+e(this.elem).data("queue_index"),n)}return n};jQuery.Tween.prototype.run=function(t){var r,i=jQuery.Tween.propHooks[this.prop];var s=e(this.elem).data("resume_percent");var o=s+t/(1/(1-s));t=o;e(this.elem).data("pause_percent",t);return n.call(this,t)};var r=function(t,n,r,i){var s=this.data("anims");if(s==undefined){s=[]}if(this.data("pause_percent")==undefined){this.data("pause_percent",0)}if(this.data("resume_percent")==undefined){this.data("resume_percent",0)}var o=jQuery.isEmptyObject(t),u=jQuery.speed(n,r,i);var a=u.complete;u.complete=function(){e(this).data("resume_percent",0);if(a!=undefined&&e.isFunction(a)){a.call(this)}var t=e(this).data("anims");var n=e(this).data("queue_index");if(t!=undefined&&t.length==n+1){e(this).data("pause_percent",0);e(this).data("resume_percent",0);var r=e(this).data();for(var i in r){if(i.indexOf("queue_cur_")>-1){e(this).removeData(i)}}}};var f=function(){var e=jQuery.Animation(this,jQuery.extend({},t),u);if(o||jQuery._data(this,"finish")){e.stop(true)}};f.finish=f;var l={optall:u,prop:t};s.push(l);this.data("anims",s);return{optall:u,doAnimation:f}};var i=function(e,t,n){if(n==undefined)n=false;if(n==true){var r=this.data("resume_percent");if(r!=undefined){t.duration=t.duration-t.duration*r}}var i=jQuery.isEmptyObject(e);var s=function(){var n=jQuery.Animation(this,jQuery.extend({},e),t);if(i||jQuery._data(this,"finish")){n.stop(true)}};s.finish=s;this.queue(t.queue,s)};jQuery.fn.animate_delay=function(e,t){if(e!=undefined&&!isNaN(e)&&e>0){if(t==undefined)t=function(){};this.animate_init({width:this.width()},e,"linear",t)}return this};jQuery.fn.animate=function(e,t,n,i){var s=this.data("animate_lock");if(s==undefined||s==false){var o=jQuery.isEmptyObject(e);var u=r.call(this,e,t,n,i);return o||u.optall.queue===false?this.each(u.doAnimation):this.queue(u.optall.queue,u.doAnimation)}else{return this}};jQuery.fn.animate_init=function(e,t,n,i){var s=this.data("animate_lock");if(s==undefined||s==false){r.call(this,e,t,n,i)}return this};jQuery.fn.animate_lock=function(){this.data("animate_lock",true)};jQuery.fn.animate_unlock=function(){this.data("animate_lock",true)};jQuery.fn.animate_play=function(e){if(e==undefined){e=false}this.data("animate_lock",e);var t=this.queue("fx");var n=this.data("pause");if(n==undefined){n=false}if(t.length==0&&n==false){var r=this.data("anims");this.data("queue_index",-1);if(r!=undefined){for(var s=0;s<r.length;s++){var o=r[s].prop;var u=r[s].optall;i.call(this,o,u,false)}}}};jQuery.fn.animate_reset=function(){e(this).each(function(){e(this).stop(true);e(this).data("pause",false);e(this).data("pause_percent",0);e(this).data("resume_percent",0);e(this).data("queue_index_current",0);e(this).data("queue_index",-1);var t=e(this).data();for(var n in t){if(n.indexOf("queue_cur_")>-1){e(this).removeData(n)}}})};jQuery.fn.animate_pause=function(){e(this).each(function(){var t=e(this).data("queue_index");var n=e(this).data("pause");var r=e(this).data("anims");if(n==undefined){n=false}if(n==false&&t>-1&&t<r.length){e(this).data("queue_index_current",t);e(this).data("pause",true);e(this).stop(true)}})};var s=function(t,n){var r=e.extend({},t);var i=e.extend({},n);return{prop:r,optall:i}};jQuery.fn.animate_resume=function(){var e=this.data("pause");if(e!=undefined&&e==true){var t=this.data("anims");var n=this;this.data("pause",false);var r=this.data("queue_index_current");this.data("queue_index",r-1);this.data("resume_percent",this.data("pause_percent"));var o=true;for(var u=r;u<t.length;u++){var a=s(t[u].prop,t[u].optall);i.call(this,a.prop,a.optall,o);o=false}}}})(jQuery);

/* Moza Animate */
(function(e){var t=function(){if(e(this).data("video_autostart")==true||e(this).data("video_autostart")=="true"){var t=e(e(this).find("iframe")[0]);t.show();if(t.length>0){var n=t.attr("id");if(n==undefined||n==null||n==""){n=moza_slide_elements.guid();t.attr("id",n)}if(t.data("src")==undefined){var r=t.attr("src");t.data("src",r)}else{var r=t.data("src")}if(r!=undefined){r=r.indexOf("?")!=-1?r+"&autoplay=1":r+"?autoplay=1";t.attr("src",r);t.data("play",true)}}}};var n=function(){var t=e(e(this).find("iframe")[0]);var n=t.attr("src");var r=t.data("play");if(t.length>0&&n!=undefined&&r==true){t.attr("src","");t.data("play",false)}t.hide()};e.fn.moza_animate_delay=function(t,n){if(typeof t!="function"&&(t==undefined||isNaN(t)||t<=0))t=1;this.each(function(){e(this).animate_delay(t,n)});return this};e.fn.moza_animate_play=function(){this.each(function(){e(this).animate_play(true)});return this};e.fn.moza_animate_pause=function(){this.each(function(){e(this).animate_pause()});return this};e.fn.moza_animate_resume=function(){this.each(function(){e(this).animate_resume()});return this};e.fn.moza_animate_play_video=function(){return this.each(function(){t.call(this)})};e.fn.moza_animate_stop_video=function(){return this.each(function(){n.call(this)})};e.fn.moza_animate=function(t,n,r,i,s){if(typeof n!="function"&&(n==undefined||isNaN(n)||n<=0))n=1;if(typeof s!="function"&&(s==undefined||isNaN(s)||s<=0))s=1;var o=function(){i.call(this);var t=e(this).data("queue_index");if(t==1){e(this).moza_animate_play_video()}var n=e(this).data("anims")};this.each(function(){if(e.isEmptyObject(t)==false&&n>0){e(this).animate_init(t,n,r,o)}if(s!=undefined&&s>0){e(this).moza_animate_delay(s)}});return this}})(jQuery);

/* Moza Slide Element */
var moza_slide_elements={moza:null,init:function(e){moza_slide_elements.moza=e;var t=$(".moza-element",e.slides),n=0;t.each(function(e){var t=$(this);var n=t.data("moza_style");if(n==undefined){t.data("moza_style",t.attr("style"))}t.data("moza_animate_in",moza_slide_elements.split_transition(t.data("animate_in")));var r=t.data();var i=[];for(var s in r){if(s.indexOf("animate")>-1){if(s!="moza_animate_in"&&s!="moza_animate_out"&&s!="animate_in"&&s!="animate_out"){i.push({key:s,value:moza_slide_elements.split_transition(r[s])})}}}i.sort(function(e,t){var n=e.key.split("_");var r=t.key.split("_");if(n.length==2&&n.length==2){var i=/^\d+$/.test(n[1]);var s=/^\d+$/.test(r[1]);if(i==true&&s==true){n[1]=parseInt(n[1]);r[1]=parseInt(r[1]);if(n[1]<r[1])return-1;if(n[1]>r[1])return 1;return 0}}if(e.key<t.key)return-1;if(e.key>t.key)return 1;return 0});t.data("moza_animate_extra",i);t.data("moza_animate_out",moza_slide_elements.split_transition(t.data("animate_out")))})},split_transition:function(e){if(e==undefined||e==null)e="";var t=e.split(";");var n={};var r,i,s;for(j=0;j<t.length;j++){r=t[j].split(":");if(r.length==2){i=r[0];s=r[1];n[i]=s}}return n},create:function(e){if(e==undefined||e==null){e=moza_slide_elements.moza}var t=e.slides.eq(e.defs.slide),n=$(".moza-element",t);n.each(function(e){var n=$(this);n.attr("style",n.data("moza_style"));var r=n.css("top").toLowerCase().replace("px","");var i=n.css("left").toLowerCase().replace("px","");n.data("top",r);n.data("left",i);n.find("iframe").each(function(){$(this).show()});n.animate_reset();var s={};var o=n.data("moza_animate_in");var u=n.data("moza_animate_out");s.top=n.data("top");s.left=n.data("left");s.opacity=1;s.delay_in=parseInt(o.delay!=undefined&&o.delay!=null?o.delay:0);s.trans_in=moza_slide_elements.build_trans(t,n,o);var a=n.data();var f=n.data("moza_animate_extra");var l=[];for(var c in f){l.push(moza_slide_elements.build_tran_extra(t,n,f[c]))}s.trans_extra=l;s.trans_out=moza_slide_elements.build_trans(t,n,u);moza_slide_elements.animation(n,s)})},build_tran_extra:function(e,t,n){var r=moza_slide_elements.build_trans(e,t,n.value);t.data("top",r.top);t.data("left",r.left);return r},build_trans:function(e,t,n){var r={};if($.isEmptyObject(n))return r;r.easing=n.easing!=undefined&&n.easing!=null?n.easing:"easeInOutQuint";r.duration=parseInt(n.duration!=undefined&&n.duration!=null?n.duration:0);r.opacity=n.fade!=undefined&&parseInt(n.fade)==0?1:0;if(n.y!=undefined)r.top=n.y;if(n.x!=undefined)r.left=n.x;r.pause_time=parseInt(n.pause_time!=undefined&&n.pause_time!=null?n.pause_time:0);var i="";var s="";if(n.transform==undefined){n.transform="2d"}if(n.transform=="2d"){i+=n.rotate!=undefined?"rotate("+parseFloat(n.rotate)+"deg) ":"";i+=n.scalex!=undefined?"scaleX("+parseFloat(n.scalex)+") ":"";i+=n.scaley!=undefined?"scaleY("+parseFloat(n.scaley)+") ":"";i+=n.skewx!=undefined?"skewX("+parseFloat(n.skewx)+"deg) ":"";i+=n.skewy!=undefined?"skewY("+parseFloat(n.skewy)+"deg) ":"";s+=n.transformorigin!=undefined&&n.transformorigin!=""?n.transformorigin:"";r.transform=i;r.tranform_origin=s}if(n.position_type==undefined){n.position_type="offset"}if(n.position_type=="offset"){switch(r.top){case"top":r.top=0-parseFloat(t.outerHeight(true));break;case"bottom":r.top=$(e).outerHeight(true)+parseFloat(t.outerHeight(true));break;default:r.top=parseFloat(t.data("top"))+parseFloat(r.top);break}switch(r.left){case"left":r.left=0-parseFloat(t.outerWidth(true))-(e.outerWidth(true)-$(".slide-elements",e).width())/2;break;case"right":r.left=$(e).outerWidth(true)+parseFloat(t.outerWidth(true));break;default:r.left=parseFloat(t.data("left"))+parseFloat(r.left);break}}return r},animation:function(e,t){var n=t.trans_in,r=t.trans_out;e.css({top:n.top,left:n.left,opacity:n.opacity,visibility:"hidden"});if($.isEmptyObject(t.trans_in)==false){if(n.transform!=""){e.css3({transform:n.transform})}if(n.tranform_origin!=""){e.css3({transformOrigin:n.tranform_origin})}}e.moza_animate_delay(t.delay_in);e.css({visibility:"visible"});if($.isEmptyObject(t.trans_in)==false){var i={top:t.top,left:t.left,opacity:t.opacity,transform:"rotate(0deg) scaleX(1) scaleY(1) skewX(0deg) skewY(0deg) "};if(n.tranform_origin!=""){i=$.extend(i,{transformOrigin:"50% 50%"})}e.moza_animate(i,n.duration,n.easing,function(){},n.pause_time)}for(var s=0;s<t.trans_extra.length;s++){var o={};if(t.trans_extra[s].top!=undefined)o.top=t.trans_extra[s].top;if(t.trans_extra[s].left!=undefined)o.left=t.trans_extra[s].left;if(t.trans_extra[s].transform!=""){o=$.extend(o,{transform:t.trans_extra[s].transform})}if(t.trans_extra[s].tranform_origin!=""){o=$.extend(o,{transformOrigin:t.trans_extra[s].tranform_origin})}e.moza_animate(o,t.trans_extra[s].duration,t.trans_extra[s].easing,function(){},t.trans_extra[s].pause_time)}if($.isEmptyObject(t.trans_out)==false){var u={top:r.top,left:r.left,opacity:r.opacity};if(r.transform!=""){u=$.extend(u,{transform:r.transform})}if(r.tranform_origin!=""){u=$.extend(u,{transformOrigin:r.tranform_origin})}if(r.pause_time==undefined||r.pause_time==null){r.pause_time=0}e.moza_animate(u,r.duration,r.easing,function(){$(this).moza_animate_stop_video();$(this).css({visibility:"hidden",transform:"none",transformOrigin:"none"})},r.pause_time)}if(moza_slide_elements.moza.mozaTimer.hasClass("paused")){e.moza_animate_play();e.moza_animate_pause()}else{e.moza_animate_play()}},_s4:function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)},guid:function(){return moza_slide_elements._s4()+moza_slide_elements._s4()+"_"+moza_slide_elements._s4()+"_"+moza_slide_elements._s4()+"_"+moza_slide_elements._s4()+"_"+moza_slide_elements._s4()+"_"+moza_slide_elements._s4()+moza_slide_elements._s4()}};

/* Moza Nav */
var moza_nav={init:function(){var e=this;if(e.options.keyboardNav){$(document).bind("keyup.moza",function(t){if(t.keyCode=="37"){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var n=e.slides.eq(e.defs.slide);var r=$(".moza-element",n);r.animate_reset();r.moza_animate_stop_video();e.defs.slide-=2;e.go_to("prev")}if(t.keyCode=="39"){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var n=e.slides.eq(e.defs.slide);var r=$(".moza-element",n);r.animate_reset();r.moza_animate_stop_video();e.go_to("next")}if(t.keyCode=="32"){var i=$(".moza-controlNav a.moza-control_extra",e.sliderContent);if(e.mozaTimer.hasClass("paused")){i.removeClass("play");i.addClass("pause");e.resume()}else{i.removeClass("pause");i.addClass("play");e.pause()}}})}e.sliderContent.bind("moza:pause",function(){e.pause()});e.sliderContent.bind("moza:resume",function(){e.resume()});e.sliderContent.bind("moza:previous",function(){if(e.defs.lock)return false;$(".moza-element",e.slides).moza_animate_pause();moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.defs.slide-=2;e.go_to("prev")});e.sliderContent.bind("moza:next",function(){if(e.defs.lock)return false;$(".moza-element",e.slides).moza_animate_pause();moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.go_to("next")});e.sliderContent.bind("moza:slide",function(t,n){if(e.defs.lock||e.defs.slide==n)return false;if($(this).hasClass("active"))return false;$(".moza-element",e.slides).moza_animate_pause();moza_timer.cleanTimer.call(e);var r=/[.]/.exec(e.defs.image.data("moza:background"))?/[^.]+$/.exec(e.defs.image.data("moza:background")):undefined;if(r!=undefined){r=r+"".toLowerCase();if(r=="jpg"||r=="png"||r=="gif"||r=="jpeg"){e.slider.css("background",'url("'+e.defs.image.data("moza:background")+'") no-repeat')}}else{e.slider.css("background",e.defs.image.data("moza:background"))}var n=e.slides.eq(e.defs.slide);var i=$(".moza-element",n);i.animate_reset();i.moza_animate_stop_video();e.defs.slide=n-1;e.go_to("control")})},direction:function(e){var e=this;if(e.options.directionNav){e.slider.append('<div class="moza-directionNav"><a class="moza-prevNav" title="'+e.options.previousLabel+'">'+e.options.previousLabel+'</a><a class="moza-nextNav" title="'+e.options.nextLabel+'">'+e.options.nextLabel+"</a></div>");var t=e.slider.height()/2-50;$(".moza-directionNav",e.slider).css({top:t,opacity:e.options.directionNavHoverOpacity});e.slider.hover(function(){$(".moza-directionNav",e.slider).stop().animate({opacity:1},300)},function(){$(".moza-directionNav",e.slider).stop().animate({opacity:e.options.directionNavHoverOpacity},300)});$("a.moza-prevNav",e.slider).on("click",function(){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.defs.slide-=2;e.go_to("prev")});$("a.moza-nextNav",e.slider).on("click",function(){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.go_to("next")})}},control:function(){var e=this;if(e.options.controlNav){var t='<div class="moza-controlNav">',n="";t+='<div class="moza-items"><ul>';for(var r=0;r<e.defs.total;r++){var i=e.slides.eq(r);t+="<li>";if(e.options.controlNavThumbs){var s=i.data("moza:thumbnail")?i.data("moza:thumbnail"):i.data("moza:background");t+='<a class="moza-control" rel="'+r+'"><img src="'+s+'" /></a>'}else{var s=i.data("moza:thumbnail")?i.data("moza:thumbnail"):i.data("moza:background");var o=/[.]/.exec(s)?/[^.]+$/.exec(s):undefined;if(o!=undefined){t+='<a class="moza-control" rel="'+r+'">'+(r+1)+"</a>";if(e.options.controlNavTooltip)n+='<div rel="'+r+'"><img src="'+s+'" /></div>'}else{t+='<a class="moza-control" rel="'+r+'">'+(r+1)+"</a>";if(e.options.controlNavTooltip)n+='<div rel="'+r+'" style="background:'+s+'" ></div>'}}t+="</li>"}t+='<li><a class="moza-control_extra pause">&nbsp;</a></li>';t+="</ul>";t+="</div></div>";if(!e.options.controlNavThumbs&&e.options.controlNavTooltip)t+='<div class="moza-tooltip"><div class="holder"><div class="tooltip_container">'+n+"</div></div></div>";e.sliderContent.append(t);$(".moza-controlNav a.moza-control:eq("+e.defs.slide+")",e.sliderContent).addClass("active");$("a.moza-controlPrevNav",e.sliderContent).on("click",function(){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.defs.slide-=2;e.go_to("prev")});$("a.moza-controlNextNav",e.sliderContent).on("click",function(){if(e.defs.lock)return false;moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.go_to("next")});$(".moza-controlNav a.moza-control",e.sliderContent).on("click",function(){if(e.defs.lock)return false;if($(this).hasClass("active"))return false;moza_timer.cleanTimer.call(e);var t=/[.]/.exec(e.defs.image.data("moza:background"))?/[^.]+$/.exec(e.defs.image.data("moza:background")):undefined;if(t!=undefined){t=t+"".toLowerCase();if(t=="jpg"||t=="png"||t=="gif"||t=="jpeg"){e.slider.css("background",'url("'+e.defs.image.data("moza:background")+'") no-repeat')}}else{e.slider.css("background",e.defs.image.data("moza:background"))}var n=e.slides.eq(e.defs.slide);var r=$(".moza-element",n);r.animate_reset();r.moza_animate_stop_video();e.defs.slide=$(this).attr("rel")-1;e.go_to("control")});var u=e.sliderContent.width()/2-$(".moza-controlNav",e.sliderContentContent).width()/2;$(".moza-controlNav",e.sliderContent).css({left:u,width:$(".moza-controlNav",e.sliderContent).find("li").length*20,opacity:e.options.controlNavHoverOpacity});e.slider.hover(function(){$(".moza-controlNav",e.sliderContent).stop().animate({opacity:1},300);e.slider.addClass("moza-hover")},function(){$(".moza-controlNav",e.sliderContent).stop().animate({opacity:e.options.controlNavHoverOpacity},300);e.slider.removeClass("moza-hover")});var a=null;$(".moza-controlNav a.moza-control",e.sliderContent).hover(function(t){var n=$(this),r=n.attr("rel"),i=$(".moza-tooltip",e.sliderContent),s=$("div.holder",i),o=n.offset().left-e.slider.offset().left-i.outerWidth()/2+e.options.tooltipX,u=n.offset().top-e.sliderContent.offset().top-i.outerHeight()+e.options.tooltipY,f=$("div[rel="+r+"]");scrollLeft=r*f.width();i.stop().animate({left:o,top:u,opacity:1},100);if(i.not(":visible"))i.fadeIn(300);s.stop().animate({scrollLeft:scrollLeft},300);clearTimeout(a)},function(e){});$(".moza-controlNav a.moza-control_extra",e.sliderContent).hover(function(t){var n=$(".moza-tooltip",e.sliderContent);a=setTimeout(function(){n.animate({opacity:0},100,function(){n.hide()})},300)});if(e.options.pauseOnHover!=true){$(".moza-controlNav a.moza-control_extra",e.sliderContent).on("click",function(){if(e.mozaTimer.hasClass("paused")){$(this).removeClass("play");$(this).addClass("pause");e.resume()}else{e.pause();$(this).removeClass("pause");$(this).addClass("play")}})}$(".moza-controlNav div.moza-items",e.sliderContent).hover(function(e){},function(t){var n=$(".moza-tooltip",e.sliderContent);a=setTimeout(function(){n.animate({opacity:0},100,function(){n.hide()})},300)})}},active_link:function(){var e=this;if(e.options.controlNav){$(".moza-controlNav a.moza-control",e.sliderContent).removeClass("active");$(".moza-controlNav a.moza-control:eq("+e.defs.slide+")",e.sliderContent).addClass("active")}}};

/* Moza Timer */
var moza_timer={init:function(e){var t=this;var n=t.options;var r=$(".moza-preloader",t.slider);var e=$("div",r);r.css({top:t.slider.height()/2-r.height()/2+"px",left:t.slider.width()/2-r.width()/2+"px"});t.slider.append('<div class="moza-timer"><div></div></div>');t.mozaTimer=$(".moza-timer",t.slider);t.mozaTimer.hide();t.defs.time=t.defs.image.data("moza:pausetime")?t.defs.image.data("moza:pausetime"):n.pauseTime;t.pieDegree=0;var i=n.timerPadding,s=n.timerDiameter,o=n.timerStroke;if(t.defs.total>1&&t.defs.timer!="bar"){o=0;var u=s+i*2+o*2,a=u,f=Raphael(t.mozaTimer[0],u,a);t.R=s/2;var l={stroke:n.timerBg,"stroke-width":o+i*2},c={stroke:n.timerColor,"stroke-width":o,"stroke-linecap":"round"},h={fill:n.timerColor,stroke:"none","stroke-width":0},p={fill:n.timerBg,stroke:"none","stroke-width":0};f.customAttributes.arc=function(e,t){var n=360,r=360/n*e,u=(90-r)*Math.PI/180,a=s/2+i+o,f=s/2+i+o,l=a+t*Math.cos(u),c=f-t*Math.sin(u),h;if(n==e){h=[["M",a,f-t],["A",t,t,0,1,1,299.99,f-t]]}else{h=[["M",a,f-t],["A",t,t,0,+(r>180),1,l,c]]}return{path:h}};f.customAttributes.segment=function(e,t){var n=-90;t=t-1;e=n+e;var r=e-n>180,o=s/2+i,u=s/2+i;n=n%360*Math.PI/180;e=e%360*Math.PI/180;return{path:[["M",o,u],["l",t*Math.cos(n),t*Math.sin(n)],["A",t,t,0,+r,1,o+t*Math.cos(e),u+t*Math.sin(e)],["z"]]}};if(t.defs.total>1&&t.defs.timer=="pie"){f.circle(t.R+i,t.R+i,t.R+i-1).attr(p)}t.timerBgPath=f.path().attr(l),t.timerPath=f.path().attr(c),t.pieTimer=f.path().attr(h)}t.barTimer=$("div",t.mozaTimer);if(t.defs.timer=="bar"){t.mozaTimer.css({opacity:n.timerOpacity,width:s,height:o,border:n.timerBarStroke+"px "+n.timerBarStrokeColor+" "+n.timerBarStrokeStyle,padding:i});t.barTimer.css({width:0,height:o,background:n.timerColor,"float":"left"})}else{t.mozaTimer.css({opacity:n.timerOpacity,width:u,height:a})}moza_timer.setTimerPosition.call(t);if(t.defs.images.length>0){var d=new Array;$.each(t.defs.images,function(i,s){var o=new Image;var u=s;var a=o;if("string"!=typeof s){u=$(s).attr("src")||$(s).css("background-image").replace(/^url\((?:"|')?(.*)(?:'|")?\)$/mg,"$1");a=s}$(o).bind("load error",function(s){d.push(a);$.data(a,"loaded","error"==s.type?false:true);var o=i/t.defs.images.length*100;e.stop().animate({width:o+"%"});if(d.length>=t.defs.images.length){e.stop().animate({width:"100%"},function(){r.remove();t.start();n.onAfterLoad.call(this)})}$(this).unbind("load error")});o.src=u})}else{r.remove();t.start();n.onAfterLoad.call(this)}if(t.defs.timer!="bar"&&t.options.pauseOnHover!=true){t.mozaTimer.on("click",function(){var e=$(".moza-controlNav a.moza-control_extra",t.slider);if(t.mozaTimer.hasClass("paused")){e.removeClass("play");e.addClass("pause");t.resume()}else{e.removeClass("pause");e.addClass("play");t.pause()}})}else{t.mozaTimer.css("cursor","default")}},setTimer:function(){var e=this;e.timer=setInterval(function(){moza_timer.timerCall(e)},e.defs.time/120)},cleanTimer:function(){var e=this;clearInterval(e.timer);e.timer=null},timerCall:function(e){moza_timer.processTimer.call(e);if(e.pieDegree>360){moza_timer.cleanTimer.call(e);var t=e.slides.eq(e.defs.slide);var n=$(".moza-element",t);n.animate_reset();n.moza_animate_stop_video();e.go_to(false)}},processTimer:function(){var e=this;if(e.defs.timer=="pie"){var t=e.pieDegree==0?0:e.pieDegree+.9;e.pieTimer.attr({segment:[t,e.R]})}else{e.barTimer.css({width:e.pieDegree/360*100+"%"})}e.pieDegree+=3},setTimerPosition:function(){var e=this,t=e.options.timerPosition.toLowerCase().split("-");for(var n=0;n<t.length;n++){if(t[n]=="top"){e.mozaTimer.css({top:"0px",bottom:""})}else if(t[n]=="middle"){e.mozaTimer.css({top:e.options.timerY+e.slider.height()/2-e.options.timerDiameter/2+"px",bottom:""})}else if(t[n]=="bottom"){e.mozaTimer.css({bottom:"0px",top:""})}else if(t[n]=="left"){e.mozaTimer.css({left:"0px",right:""})}else if(t[n]=="center"){e.mozaTimer.css({left:e.options.timerX+e.slider.width()/2-e.options.timerDiameter/2+"px",right:""})}else if(t[n]=="right"){e.mozaTimer.css({right:"0px",left:""})}}}};

/* Moza Slider */
(function(e,t,n){var r=false;var i=function(r,i){var s=this;s.options=i;s.sliderContent=r,s.sliderInner=s.sliderContent.html();s.sliderContent.html("<div class='mozaSlider'>"+s.sliderInner+"</div>");s.slider=e(".mozaSlider",s.sliderContent);s.sliderContent.css("position","relative");s.sliderContent.css("margin","0px auto");s.sliderContent.css("overflow","hidden");s.slider.css("position","relative");s.slider.height(i.height);if(i.fullwidth==false){s.slider.width(i.width);s.sliderContent.css("max-width",i.width+"px")}s.defs={slide:0,total:0,image:"",current_image:"",images:[],width:i.width,height:i.height,timer:i.timer.toLowerCase(),lock:false,paused:i.autoAdvance?false:true,time:i.pauseTime};s.disable_selection(s.slider[0]);s.slides=s.slider.children();s.slides.css({overflow:"hidden"});e(t).resize(function(){var t=s.sliderContent,n=t.width(),r=t.height();var o=n/i.width;if(i.responsive==true){if(n<=i.width){s.slider.css3({"transform-origin":"0 0",transform:"scale("+o+")"});s.slider.width(i.width);t.height(i.height*o)}else{s.slider.css3({"transform-origin":"0 0",transform:"scale(1)"});s.slider.width(i.width*o);t.height(i.height)}var u=s.sliderContent.width()/2-e(".moza-controlNav",s.sliderContent).width()/2;e(".moza-controlNav",s.sliderContent).css({left:u})}if(i.responsive==false&&i.fullwidth==true){var u=s.sliderContent.width()/2-e(".moza-controlNav",s.sliderContent).width()/2;e(".moza-controlNav",s.sliderContent).css({left:u})}});if(s.sliderContent.width()!=s.slider.width()){e(t).trigger("resize")}s.slides.each(function(t){var r=e(this);if(r.data("moza:background")==n||r.data("moza:background")==null){s.defs.images.push("")}else{var o=/[.]/.exec(r.data("moza:background"))?/[^.]+$/.exec(r.data("moza:background")):n;if(o!=n){o=o+"".toLowerCase();if(o=="jpg"||o=="png"||o=="gif"||o=="jpeg"){s.defs.images.push(r.data("moza:background"))}}}if(r.data("moza:thumbnail"))s.defs.images.push(r.data("moza:thumbnail"));r.css("display","none");if(r.data("moza:type")=="media"){var u=r.children().eq(0),a=e('<div class="moza-video-show"><div class="moza-video-container"><a class="moza-video-close" title="'+i.closeLabel+'">&#735;</a></div></div>');r.append(a);var f=s.slider.height()/2-50;var l=s.slider.width()/2-50;var c=e('<div class="moza-play-video-button" style="top:'+f+"px; left:"+l+'px;" title="Play"><div style="width:100px;">&nbsp;</div></div>');r.append(c);u.appendTo(e("div.moza-video-container",a));a.css({width:s.slider.width(),height:s.slider.height(),top:"-"+s.slider.height()+"px"}).hide();r.addClass("moza-video").css({cursor:"pointer"});s.slider.hover(function(e){c.addClass("hover")},function(e){c.removeClass("hover")})}s.defs.total++});s.slides.each(function(){e(this).append(e('<div class="slide-elements"></div>'));e(".moza-element",e(this)).appendTo(e(".slide-elements",e(this)))});e(".slide-elements",s.slides).css({width:i.width,height:i.height});s.slider.append('<div class="moza-preloader"><div></div></div>');i.startSlide=i.randomStart?Math.floor(Math.random()*s.defs.total):i.startSlide;i.startSlide=i.startSlide>0&&i.startSlide>=s.defs.total?s.defs.total-1:i.startSlide;s.defs.slide=i.startSlide;s.defs.image=s.slides.eq(s.defs.slide);moza_timer.init.call(s);e(".moza-element",s.slider).css({visibility:"hidden",display:"block"});moza_nav.init.call(this);e(".moza-video",s.slider).click(function(t){var n=e(this),r=e(".moza-video-show",n);if(!e(t.target).hasClass("moza-video-close")&&!e(t.target).hasClass("moza-element")&&!e(t.target).parents().hasClass("moza-element")){r.show().animate({top:0},1e3,"easeOutBounce");s.pause()}});e(".moza-video-close",s.slider).click(function(){var t=e(this).parents(".moza-video-show"),n=e("iframe",t),r=n.attr("src");t.animate({top:"-"+s.slider.height()+"px"},1e3,"easeOutBounce",function(){s.resume();if(e(".moza-controlNav a.moza-control_extra",s.slider).hasClass("play")){s.pause()}n.removeAttr("src").attr("src",r);t.hide()})})};i.prototype={timer:null,start:function(){var t=this;t.mozaTimer.show();t.slides.eq(t.defs.slide).css("display","block");var r=/[.]/.exec(t.defs.image.data("moza:background"))?/[^.]+$/.exec(t.defs.image.data("moza:background")):n;if(r!=n){r=r+"".toLowerCase();if(r=="jpg"||r=="png"||r=="gif"||r=="jpeg"){t.slider.css("background",'url("'+t.defs.image.data("moza:background")+'") no-repeat')}}else{t.slider.css("background",t.defs.image.data("moza:background"))}moza_slide_elements.init(t);moza_slide_elements.create();t.mozaTimer.addClass("paused").attr("title",t.options.playLabel);if(t.options.autoAdvance&&t.defs.total>0){t.mozaTimer.removeClass("paused").attr("title",t.options.pauseLabel);moza_timer.setTimer.call(t)}moza_nav.direction.call(this);moza_nav.control.call(this);t.slider.bind("mouseover.moza mousemove.moza",function(){var n=e(".moza-controlNav a.moza-control_extra",t.slider);if(t.options.pauseOnHover&&!t.defs.paused){n.removeClass("pause");n.addClass("play");e(".moza-element",t.slides).moza_animate_pause();moza_timer.cleanTimer.call(t)}t.slider.addClass("moza-hover")}).bind("mouseout.moza",function(){var n=e(".moza-controlNav a.moza-control_extra",t.slider);if(t.options.pauseOnHover&&!t.defs.paused&&t.timer==null&&t.pieDegree<=359&&t.options.autoAdvance){n.removeClass("play");n.addClass("pause");e(".moza-element",t.slides).moza_animate_resume();moza_timer.setTimer.call(t)}t.slider.removeClass("moza-hover")})},slide_transition:function(t,r){var i=this;if(t=="2d"){var s=moza_transition_2d}else if(t=="3d"){var s=moza_transition_3d}var o=utility.getBrowser();if(o.msie&&t=="3d"){var u=[20,19,21,22,23,24,27,28,23,24,27,28,23,24,27,28,26,30,25,29,26,30,25,29,26,30,25,29,13,14,15,16,13,14,15,16,13,14,15,16,48,47,49,50,31,32,33,34,41,42,39,40,43,44,45,46,36,35,37,38,13,14,15,16,13,14,15,16,13,14,15,16,48,47,49,50,31,32,33,34,41,42,39,40,43,44,45,46,36,35,37,38];s=moza_transition_2d;r=u[r]}var a={};var f=i.slider;a.current=i.defs.current_image.data("moza:background");a.next=i.defs.image.data("moza:background");if(i.options.fullwidth==false){a.width=i.defs.width}else{a.width=i.sliderContent.width()>i.slider.width()?i.sliderContent.width():i.slider.width()}a.height=i.defs.height;i.sliderContent.css("overflow","visible");i.slides.css("display","none");e(".moza-controlNav",i.sliderContent).hide();e(".moza-timer",i.slider).css("visibility","hidden");e(".moza-tooltip",i.sliderContent).hide();s.init(f,a,parseInt(r));s.update({end:function(){i.options.onAfterChange.call(i);var t=i.slides.eq(i.defs.slide);var r=e(".moza-element",t);r.each(function(){var t=e(e(this).find("iframe")[0]);var r=t.data("src");if(t.length>0&&r!=n&&t.attr("src")==""){t.attr("src",r)}});i.defs.lock=false;t.show();i.defs.time=i.defs.image.data("moza:pausetime")?i.defs.image.data("moza:pausetime"):i.options.pauseTime;i.mozaTimer.animate({opacity:i.options.timerOpacity});i.pieDegree=0;moza_timer.processTimer.call(i);moza_slide_elements.create(i);if(i.timer==null&&!i.defs.paused)i.timer=setInterval(function(){moza_timer.timerCall(i)},i.defs.time/120);i.sliderContent.css("overflow","hidden");e(".moza-controlNav",i.sliderContent).show();e(".moza-timer",i.slider).css("visibility","visible")}});s.execute()},go_to:function(t){var r=this;var i=r.slides.eq(r.defs.slide);var s=e(".moza-element",i);s.css({visibility:"hidden"});s.animate_reset();if(r.defs&&r.defs.slide==r.defs.total-1){r.options.onLastSlide.call(this)}moza_timer.cleanTimer.call(r);r.mozaTimer.animate({opacity:0});r.options.onBeforeChange.call(this);r.defs.current_image=r.slides.eq(r.defs.slide);r.defs.slide++;if(r.defs.slide==r.defs.total){r.defs.slide=0;r.options.onSlideShowEnd.call(this)}if(r.defs.slide<0)r.defs.slide=r.defs.total-1;r.defs.image=r.slides.eq(r.defs.slide);moza_nav.active_link.call(this);var o=r.defs.image.data("moza:transition");var u="2d";var a=0;if(o!=n&&o!=null&&e.trim(o)!=""){var f=o.split(";");var l=[];var c=[];var h=[];if(f.length>0){for(var p=0;p<f.length;p++){var d=f[p].split(":");if(d.length==2){switch(d[0]){case"2d":l[l.length]="2d";if(d[1]=="all"){for(var v=0;v<=63;v++){c.push(v)}}else{c=d[1].split(",")}break;case"3d":l[l.length]="3d";if(d[1]=="all"){for(var v=0;v<=91;v++){h.push(v)}}else{h=d[1].split(",")}break}}}u=l[Math.floor(Math.random()*l.length)];switch(u){case"2d":a=c[Math.floor(Math.random()*c.length)];break;case"3d":a=h[Math.floor(Math.random()*h.length)];break}}}else{var l=new Array("2d","3d");u=l[Math.floor(Math.random()*l.length)];switch(u){case"2d":a=Math.floor(Math.random()*64);break;case"3d":a=Math.floor(Math.random()*92);break}}r.defs.lock=true;r.slide_transition(u,a)},resume:function(){var t=this;if(t.timer==null&&t.defs.paused){t.mozaTimer.removeClass("paused").attr("title",t.options.pauseLabel);var n=t.slides.eq(t.defs.slide);e(".moza-element",n).moza_animate_resume();moza_timer.setTimer.call(t);t.defs.paused=false;t.options.onPlay.call(this)}},pause:function(){var t=this;t.mozaTimer.addClass("paused").attr("title",t.options.playLabel);var n=t.slides.eq(t.defs.slide);e(".moza-element",n).moza_animate_pause();moza_timer.cleanTimer.call(t);t.defs.paused=true;t.options.onPause.call(this)},disable_selection:function(e){if(typeof e.onselectstart!="undefined")e.onselectstart=function(){return false};else if(typeof e.style.MozUserSelect!="undefined")e.style.MozUserSelect="none";else if(typeof e.style.webkitUserSelect!="undefined")e.style.webkitUserSelect="none";else if(typeof e.style.userSelect!="undefined")e.style.userSelect="none";else e.onmousedown=function(){return false};e.unselectable="on"}};e.fn.MozaSlider=function(t){t=jQuery.extend({width:960,height:400,fullwidth:false,responsive:false,pauseTime:5e3,startSlide:0,randomStart:false,autoAdvance:true,keyboardNav:true,touchNav:true,pauseOnHover:false,nextLabel:"Next",previousLabel:"Previous",playLabel:"Play",pauseLabel:"Pause",closeLabel:"Close",directionNav:true,directionNavHoverOpacity:.6,controlNav:true,controlNavHoverOpacity:.6,controlNavThumbs:false,controlNavTooltip:true,tooltipX:5,tooltipY:-5,timer:"Pie",timerBg:"#000",timerColor:"#EEE",timerOpacity:.5,timerDiameter:30,timerPadding:4,timerStroke:3,timerBarStroke:1,timerBarStrokeColor:"#EEE",timerBarStrokeStyle:"solid",timerPosition:"top-right",timerX:10,timerY:10,onBeforeChange:function(){},onAfterChange:function(){},onAfterLoad:function(){},onLastSlide:function(){},onSlideShowEnd:function(){},onPause:function(){},onPlay:function(){}},t);e(this).each(function(){var n=e(this);new i(n,t)})}})(jQuery,this);